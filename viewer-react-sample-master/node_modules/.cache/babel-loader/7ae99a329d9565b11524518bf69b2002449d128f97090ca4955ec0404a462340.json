{"ast":null,"code":"import _classCallCheck from\"C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _objectSpread from\"C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/// import * as Autodesk from \"@types/forge-viewer\";\nimport React from'react';import'../extensions/FiltrosVisuales.js';import'../extensions/HandleSelectionExtension.js';import{jsx as _jsx}from\"react/jsx-runtime\";var _window=window,Autodesk=_window.Autodesk;var runtime={/** @type {Autodesk.Viewing.InitializerOptions} */options:null,/** @type {Promise<void>} */ready:null};/**\n * Initializes global runtime for communicating with Autodesk Platform Services.\n * Calling this function repeatedly with different options is not allowed, and will result in an exception.\n * @async\n * @param {Autodesk.Viewing.InitializerOptions} options Runtime initialization options.\n * @returns {Promise<void>}\n */function initializeViewerRuntime(options){if(!runtime.ready){runtime.options=_objectSpread({},options);runtime.ready=new Promise(function(resolve){return Autodesk.Viewing.Initializer(runtime.options,resolve);});}else{if(['accessToken','getAccessToken','env','api','language'].some(function(prop){return options[prop]!==runtime.options[prop];})){return Promise.reject('Cannot initialize another viewer runtime with different settings.');}}return runtime.ready;}/**\n * Wrapper for the Autodesk Platform Services viewer component.\n */var Viewer=/*#__PURE__*/function(_React$Component){_inherits(Viewer,_React$Component);var _super=_createSuper(Viewer);function Viewer(props){var _this;_classCallCheck(this,Viewer);_this=_super.call(this,props);/** @type {HTMLDivElement} */_this.onViewerCameraChange=function(){if(_this.props.onCameraChange){_this.props.onCameraChange({viewer:_this.viewer,camera:_this.viewer.getCamera()});}};_this.onViewerSelectionChange=function(){if(_this.props.onSelectionChange){_this.props.onSelectionChange({viewer:_this.viewer,ids:_this.viewer.getSelection()});}};_this.container=null;/** @type {Autodesk.Viewing.GuiViewer3D} */_this.viewer=null;return _this;}_createClass(Viewer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;initializeViewerRuntime(this.props.runtime||{}).then(function(_){_this2.viewer=new Autodesk.Viewing.GuiViewer3D(_this2.container);_this2.viewer.start();_this2.viewer.loadExtension('FiltrosVisuales');// Carga tu extensión aquí\n_this2.viewer.loadExtension('HandleSelectionExtension');// Carga tu extensión aquí\n_this2.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,_this2.onViewerCameraChange);_this2.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,_this2.onViewerSelectionChange);_this2.updateViewerState({});}).catch(function(err){return console.error(err);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.viewer){this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onViewerCameraChange);this.viewer.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,this.onViewerSelectionChange);this.viewer.finish();this.viewer=null;}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.viewer){this.updateViewerState(prevProps);}}},{key:\"updateViewerState\",value:function updateViewerState(prevProps){var _this3=this;if(this.props.urn&&this.props.urn!==prevProps.urn){Autodesk.Viewing.Document.load('urn:'+this.props.urn,function(doc){return _this3.viewer.loadDocumentNode(doc,doc.getRoot().getDefaultGeometry());},function(code,message,errors){return console.error(code,message,errors);});}else if(!this.props.urn&&this.viewer.model){this.viewer.unloadModel(this.viewer.model);}var selectedIds=this.viewer.getSelection();if(JSON.stringify(this.props.selectedIds||[])!==JSON.stringify(selectedIds)){this.viewer.select(this.props.selectedIds);}}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsx(\"div\",{ref:function ref(_ref){return _this4.container=_ref;}});}}]);return Viewer;}(React.Component);export default Viewer;","map":{"version":3,"names":["React","window","Autodesk","runtime","options","ready","initializeViewerRuntime","Promise","resolve","Viewing","Initializer","some","prop","reject","Viewer","props","onViewerCameraChange","onCameraChange","viewer","camera","getCamera","onViewerSelectionChange","onSelectionChange","ids","getSelection","container","then","_","GuiViewer3D","start","loadExtension","addEventListener","CAMERA_CHANGE_EVENT","SELECTION_CHANGED_EVENT","updateViewerState","catch","err","console","error","removeEventListener","finish","prevProps","urn","Document","load","doc","loadDocumentNode","getRoot","getDefaultGeometry","code","message","errors","model","unloadModel","selectedIds","JSON","stringify","select","ref","Component"],"sources":["C:/Users/nicol/ProyectosWeb/icd/icd7/viewer-react-sample-master/src/components/Viewer.jsx"],"sourcesContent":["/// import * as Autodesk from \"@types/forge-viewer\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport '../extensions/FiltrosVisuales.js';  \nimport '../extensions/HandleSelectionExtension.js';\nconst { Autodesk } = window;\n\nconst runtime = {\n    /** @type {Autodesk.Viewing.InitializerOptions} */\n    options: null,\n    /** @type {Promise<void>} */\n    ready: null\n};\n\n/**\n * Initializes global runtime for communicating with Autodesk Platform Services.\n * Calling this function repeatedly with different options is not allowed, and will result in an exception.\n * @async\n * @param {Autodesk.Viewing.InitializerOptions} options Runtime initialization options.\n * @returns {Promise<void>}\n */\nfunction initializeViewerRuntime(options) {\n    if (!runtime.ready) {\n        runtime.options = { ...options };\n        runtime.ready = new Promise((resolve) => Autodesk.Viewing.Initializer(runtime.options, resolve));\n    } else {\n        if (['accessToken', 'getAccessToken', 'env', 'api', 'language'].some(prop => options[prop] !== runtime.options[prop])) {\n            return Promise.reject('Cannot initialize another viewer runtime with different settings.')\n        }\n    }\n    return runtime.ready;\n}\n\n/**\n * Wrapper for the Autodesk Platform Services viewer component.\n */\nclass Viewer extends React.Component {\n    constructor(props) {\n        super(props);\n        /** @type {HTMLDivElement} */\n        this.container = null;\n        /** @type {Autodesk.Viewing.GuiViewer3D} */\n        this.viewer = null;\n    }\n\n    componentDidMount() {\n        initializeViewerRuntime(this.props.runtime || {})\n            .then(_ => {\n                this.viewer = new Autodesk.Viewing.GuiViewer3D(this.container);\n                this.viewer.start();\n                this.viewer.loadExtension('FiltrosVisuales'); // Carga tu extensión aquí\n                this.viewer.loadExtension('HandleSelectionExtension'); // Carga tu extensión aquí\n                this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n                this.viewer.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n                this.updateViewerState({});\n\n                \n            })\n            .catch(err => console.error(err));\n    }\n\n    componentWillUnmount() {\n        if (this.viewer) {\n            this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onViewerCameraChange);\n            this.viewer.removeEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT, this.onViewerSelectionChange);\n            this.viewer.finish();\n            this.viewer = null;\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.viewer) {\n            this.updateViewerState(prevProps);\n        }\n    }\n\n    updateViewerState(prevProps) {\n        if (this.props.urn && this.props.urn !== prevProps.urn) {\n            Autodesk.Viewing.Document.load(\n                'urn:' + this.props.urn,\n                (doc) => this.viewer.loadDocumentNode(doc, doc.getRoot().getDefaultGeometry()),\n                (code, message, errors) => console.error(code, message, errors)\n            );\n        } else if (!this.props.urn && this.viewer.model) {\n            this.viewer.unloadModel(this.viewer.model);\n        }\n\n        const selectedIds = this.viewer.getSelection();\n        if (JSON.stringify(this.props.selectedIds || []) !== JSON.stringify(selectedIds)) {\n            this.viewer.select(this.props.selectedIds);\n        }\n    }\n\n    onViewerCameraChange = () => {\n        if (this.props.onCameraChange) {\n            this.props.onCameraChange({ viewer: this.viewer, camera: this.viewer.getCamera() });\n        }\n    }\n\n    onViewerSelectionChange = () => {\n        if (this.props.onSelectionChange) {\n            this.props.onSelectionChange({ viewer: this.viewer, ids: this.viewer.getSelection() });\n        }\n    }\n\n    render() {\n        return <div ref={ref => this.container = ref}></div>;\n    }\n}\n\nViewer.propTypes = {\n    /** Viewer runtime initialization options. */\n    runtime: PropTypes.object,\n    /** URN of model to be loaded. */\n    urn: PropTypes.string,\n    /** List of selected object IDs. */\n    selectedIds: PropTypes.arrayOf(PropTypes.number),\n    /** Callback for when the viewer camera changes. */\n    onCameraChange: PropTypes.func,\n    /** Callback for when the viewer selectio changes. */\n    onSelectionChange: PropTypes.func\n};\n\nexport default Viewer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}